
var Stockfish = (() => {
  var _scriptName = typeof document != 'undefined' ? document.currentScript?.src : undefined;
  if (typeof __filename != 'undefined') _scriptName = _scriptName || __filename;
  return (
function(moduleArg = {}) {
  var moduleRtn;

function aa(){f.buffer!=k.buffer&&m();return k}function p(){f.buffer!=k.buffer&&m();return ba}function q(){f.buffer!=k.buffer&&m();return ca}function r(){f.buffer!=k.buffer&&m();return da}function ea(){f.buffer!=k.buffer&&m();return fa}var t=moduleArg,ha,u,ia=new Promise((a,b)=>{ha=a;u=b}),ja="object"==typeof window,w="undefined"!=typeof WorkerGlobalScope,x="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node&&"renderer"!=process.type,z=w&&self.name?.startsWith("em-pthread");
if(x){var A=require("worker_threads");global.Worker=A.Worker;z=(w=!A.ha)&&"em-pthread"==A.workerData}
(function(){function a(){var e=d.shift();if(!b&&void 0!==e){if("quit"===e)return t.terminate();var h=t.ccall("uci_command","number",["string"],[e]);h&&d.unshift(e);g=h?2*g:1;setTimeout(a,g)}}var b=!1,c=[];t.print=function(e){0===c.length?console.log(e):setTimeout(function(){for(var h=0;h<c.length;h++)c[h](e)})};t.addMessageListener=function(e){c.push(e)};t.removeMessageListener=function(e){e=c.indexOf(e);0<=e&&c.splice(e,1)};t.terminate=function(){b=!0;ka()};var d=[],g=1;t.postMessage=function(e){d.push(e)};
t.postRun=function(){t.postMessage=function(e){d.push(e);1===d.length&&a()};a()}})();var la=Object.assign({},t),ma=[],B="./this.program",na=(a,b)=>{throw b;},C="",oa,D;
if(x){var fs=require("fs");require("path");C=__dirname+"/";D=a=>{a=pa(a)?new URL(a):a;return fs.readFileSync(a)};oa=async a=>{a=pa(a)?new URL(a):a;return fs.readFileSync(a,void 0)};!t.thisProgram&&1<process.argv.length&&(B=process.argv[1].replace(/\\/g,"/"));ma=process.argv.slice(2);na=(a,b)=>{process.exitCode=a;throw b;}}else if(ja||w)w?C=self.location.href:"undefined"!=typeof document&&document.currentScript&&(C=document.currentScript.src),_scriptName&&(C=_scriptName),C.startsWith("blob:")?C="":
C=C.substr(0,C.replace(/[?#].*/,"").lastIndexOf("/")+1),x||(w&&(D=a=>{var b=new XMLHttpRequest;b.open("GET",a,!1);b.responseType="arraybuffer";b.send(null);return new Uint8Array(b.response)}),oa=async a=>{a=await fetch(a,{credentials:"same-origin"});if(a.ok)return a.arrayBuffer();throw Error(a.status+" : "+a.url);});var qa=console.log.bind(console),ra=console.error.bind(console);x&&(qa=(...a)=>fs.writeSync(1,a.join(" ")+"\n"),ra=(...a)=>fs.writeSync(2,a.join(" ")+"\n"));
var sa=t.print||qa,E=t.printErr||ra;Object.assign(t,la);la=null;t.arguments&&(ma=t.arguments);t.thisProgram&&(B=t.thisProgram);var F=t.wasmBinary,f,ta,G=!1,H,k,ba,ca,da,fa;function m(){var a=f.buffer;t.HEAP8=k=new Int8Array(a);t.HEAP16=new Int16Array(a);t.HEAPU8=ba=new Uint8Array(a);t.HEAPU16=new Uint16Array(a);t.HEAP32=ca=new Int32Array(a);t.HEAPU32=da=new Uint32Array(a);t.HEAPF32=new Float32Array(a);t.HEAPF64=fa=new Float64Array(a)}
if(z){var ua;if(x){var va=A.parentPort;va.on("message",c=>onmessage({data:c}));Object.assign(globalThis,{self:global,postMessage:c=>va.postMessage(c)})}var wa=!1;function a(...c){c=c.join(" ");x?fs.writeSync(2,c+"\n"):console.error(c)}t.printErr||(E=a);self.alert=function(...c){postMessage({T:"alert",text:c.join(" "),da:I()})};self.onunhandledrejection=c=>{throw c.reason||c;};function b(c){try{var d=c.data,g=d.T;if("load"===g){let e=[];self.onmessage=h=>e.push(h);self.startWorker=()=>{postMessage({T:"loaded"});
for(let h of e)b(h);self.onmessage=b};for(const h of d.Z)if(!t[h]||t[h].proxy)t[h]=(...l)=>{postMessage({T:"callHandler",Y:h,args:l})},"print"==h&&(sa=t[h]),"printErr"==h&&(E=t[h]);f=d.fa;m();ua(d.ga)}else if("run"===g){xa(d.U);ya(d.U,0,0,1,0,0);za();Aa(d.U);wa||=!0;try{Ba(d.aa,d.W)}catch(e){if("unwind"!=e)throw e;}}else"setimmediate"!==d.target&&("checkMailbox"===g?wa&&J():g&&(E(`worker: received unknown command ${g}`),E(d)))}catch(e){throw Ca(),e;}}self.onmessage=b}
z||(t.wasmMemory?f=t.wasmMemory:f=new WebAssembly.Memory({initial:(t.INITIAL_MEMORY||71303168)/65536,maximum:32768,shared:!0}),m());var Da=[],Ea=[],Fa=[],Ga=[],K=0,L=null;function Ha(){K++;t.monitorRunDependencies?.(K)}function Ia(){K--;t.monitorRunDependencies?.(K);if(0==K&&L){var a=L;L=null;a()}}function Ja(a){t.onAbort?.(a);a="Aborted("+a+")";E(a);G=!0;a=new WebAssembly.RuntimeError(a+". Build with -sASSERTIONS for more info.");u(a);throw a;}
var Ka=a=>a.startsWith("data:application/octet-stream;base64,"),pa=a=>a.startsWith("file://"),La;async function Ma(a){if(!F)try{var b=await oa(a);return new Uint8Array(b)}catch{}if(a==La&&F)a=new Uint8Array(F);else if(D)a=D(a);else throw"both async and sync fetching of the wasm failed";return a}async function Na(a,b){try{var c=await Ma(a);return await WebAssembly.instantiate(c,b)}catch(d){E(`failed to asynchronously prepare wasm: ${d}`),Ja(d)}}
async function Oa(a){var b=La;if(!F&&"function"==typeof WebAssembly.instantiateStreaming&&!Ka(b)&&!x&&"function"==typeof fetch)try{var c=fetch(b,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(c,a)}catch(d){E(`wasm streaming compile failed: ${d}`),E("falling back to ArrayBuffer instantiation")}return Na(b,a)}
function Pa(){Qa={h:Ra,f:Sa,w:Ta,x:Ua,B:Va,j:Wa,A:Xa,k:Ya,p:Za,g:$a,i:Aa,t:ab,q:bb,r:cb,n:db,d:eb,l:fb,b:gb,z:hb,s:ib,u:jb,c:M,e:kb,v:lb,m:mb,y:nb,a:f,o:ob};return{a:Qa}}var N,pb;class qb{name="ExitStatus";constructor(a){this.message=`Program terminated with exit(${a})`;this.status=a}}
var rb=a=>{a.terminate();a.onmessage=()=>{}},tb=a=>{if(0==O.length){var b=_scriptName;t.mainScriptUrlOrBlob&&(b=t.mainScriptUrlOrBlob,"string"!=typeof b&&(b=URL.createObjectURL(b)));b=new Worker(b,{workerData:"em-pthread",name:"em-pthread"});O.push(b);sb()}b=O.pop();if(!b)return 6;P.push(b);Q[a.U]=b;b.U=a.U;var c={T:"run",aa:a.$,W:a.W,U:a.U};x&&b.unref();b.postMessage(c,a.X);return 0},R=0,U=(a,b,...c)=>{for(var d=c.length,g=ub(),e=S(8*d),h=e>>3,l=0;l<c.length;l++){var v=c[l];ea()[h+l]=v}a=vb(a,0,
d,e,b);T(g);return a};function ob(a){if(z)return U(0,1,a);H=a;V||0<R||(ka(),t.onExit?.(a),G=!0);na(a,new qb(a))}var wb=a=>{a instanceof qb||"unwind"==a||na(1,a)};function xb(a){if(z)return U(1,0,a);M(a)}var M=a=>{H=a;if(z)throw xb(a),"unwind";ob(a)},O=[],P=[],yb=[],Q={},ka=()=>{for(var a of P)rb(a);for(a of O)rb(a);O=[];P=[];Q={}},Ab=a=>{var b=a.U;delete Q[b];O.push(a);P.splice(P.indexOf(a),1);a.U=0;zb(b)};function za(){yb.forEach(a=>a())}
var sb=()=>{var a=O[0];new Promise(b=>{a.onmessage=e=>{e=e.data;var h=e.T;if(e.V&&e.V!=I()){var l=Q[e.V];l?l.postMessage(e,e.X):E(`Internal error! Worker sent a message "${h}" to target pthread ${e.V}, but that thread no longer exists!`)}else if("checkMailbox"===h)J();else if("spawnThread"===h)tb(e);else if("cleanupThread"===h)Ab(Q[e.ba]);else if("loaded"===h)a.loaded=!0,b(a);else if("alert"===h)alert(`Thread ${e.da}: ${e.text}`);else if("setimmediate"===e.target)a.postMessage(e);else if("callHandler"===
h)t[e.Y](...e.args);else h&&E(`worker sent an unknown command ${h}`)};a.onerror=e=>{E(`${"worker sent an error!"} ${e.filename}:${e.lineno}: ${e.message}`);throw e;};x&&(a.on("message",e=>a.onmessage({data:e})),a.on("error",e=>a.onerror(e)));var c=[],d=["onExit","onAbort","print","printErr"],g;for(g of d)t.propertyIsEnumerable(g)&&c.push(g);a.postMessage({T:"load",Z:c,fa:f,ga:ta})})},W=a=>{for(;0<a.length;)a.shift()(t)},xa=a=>{m();var b=r()[a+52>>2];a=r()[a+56>>2];Bb(b,b-a);T(b)},Cb=[],Db,Ba=(a,b)=>
{V=R=0;var c=Cb[a];c||(a>=Cb.length&&(Cb.length=a+1),Cb[a]=c=Db.get(a));a=c(b);V||0<R?H=a:Eb(a)},V=t.noExitRuntime||!0;function Fb(a,b,c,d){return z?U(2,1,a,b,c,d):Ra(a,b,c,d)}
var Ra=(a,b,c,d)=>{if("undefined"==typeof SharedArrayBuffer)return 6;var g=[];if(z&&0===g.length)return Fb(a,b,c,d);a={$:c,U:a,W:d,X:g};return z?(a.T="spawnThread",postMessage(a,g),0):tb(a)},Gb="undefined"!=typeof TextDecoder?new TextDecoder:void 0,Hb=(a,b=0)=>{for(var c=b+NaN,d=b;a[d]&&!(d>=c);)++d;if(16<d-b&&a.buffer&&Gb)return Gb.decode(a.buffer instanceof ArrayBuffer?a.subarray(b,d):a.slice(b,d));for(c="";b<d;){var g=a[b++];if(g&128){var e=a[b++]&63;if(192==(g&224))c+=String.fromCharCode((g&31)<<
6|e);else{var h=a[b++]&63;g=224==(g&240)?(g&15)<<12|e<<6|h:(g&7)<<18|e<<12|h<<6|a[b++]&63;65536>g?c+=String.fromCharCode(g):(g-=65536,c+=String.fromCharCode(55296|g>>10,56320|g&1023))}}else c+=String.fromCharCode(g)}return c};function Sa(a,b,c){return z?U(3,1,a,b,c):0}function Ta(a,b,c){return z?U(4,1,a,b,c):0}function Ua(a,b,c,d){if(z)return U(5,1,a,b,c,d)}
var Va=()=>Ja(""),Wa=a=>{ya(a,!w,1,!ja,65536,!1);za()},Ib=a=>{if(!G)try{if(a(),!(V||0<R))try{z?Eb(H):M(H)}catch(b){wb(b)}}catch(b){wb(b)}},Aa=a=>{"function"===typeof Atomics.ea&&(Atomics.ea(q(),a>>2,a).value.then(J),a+=128,Atomics.store(q(),a>>2,1))},J=()=>{var a=I();a&&(Aa(a),Ib(Jb))},Xa=(a,b)=>{a==b?setTimeout(J):z?postMessage({V:a,T:"checkMailbox"}):(a=Q[a])&&a.postMessage({T:"checkMailbox"})},Kb=[],Ya=(a,b,c,d,g)=>{Kb.length=d;b=g>>3;for(c=0;c<d;c++)Kb[c]=ea()[b+c];return(0,Lb[a])(...Kb)},Za=
()=>{V=!1;R=0},$a=a=>{z?postMessage({T:"cleanupThread",ba:a}):Ab(Q[a])},ab=a=>{x&&Q[a].ref()},X={},gb=()=>performance.timeOrigin+performance.now();function bb(a,b){if(z)return U(6,1,a,b);X[a]&&(clearTimeout(X[a].id),delete X[a]);if(!b)return 0;var c=setTimeout(()=>{delete X[a];Ib(()=>Mb(a,performance.timeOrigin+performance.now()))},b);X[a]={id:c,ia:b};return 0}
var Y=(a,b,c)=>{var d=p();if(0<c){c=b+c-1;for(var g=0;g<a.length;++g){var e=a.charCodeAt(g);if(55296<=e&&57343>=e){var h=a.charCodeAt(++g);e=65536+((e&1023)<<10)|h&1023}if(127>=e){if(b>=c)break;d[b++]=e}else{if(2047>=e){if(b+1>=c)break;d[b++]=192|e>>6}else{if(65535>=e){if(b+2>=c)break;d[b++]=224|e>>12}else{if(b+3>=c)break;d[b++]=240|e>>18;d[b++]=128|e>>12&63}d[b++]=128|e>>6&63}d[b++]=128|e&63}}d[b]=0}},cb=(a,b,c,d)=>{var g=(new Date).getFullYear(),e=(new Date(g,0,1)).getTimezoneOffset();g=(new Date(g,
6,1)).getTimezoneOffset();var h=Math.max(e,g);r()[a>>2]=60*h;q()[b>>2]=Number(e!=g);b=l=>{var v=Math.abs(l);return`UTC${0<=l?"-":"+"}${String(Math.floor(v/60)).padStart(2,"0")}${String(v%60).padStart(2,"0")}`};a=b(e);b=b(g);g<e?(Y(a,c,17),Y(b,d,17)):(Y(a,d,17),Y(b,c,17))},Nb=1;
function db(a,b,c,d){if(!(0<=a&&3>=a))return 28;if(0===a)a=Date.now();else if(Nb)a=performance.timeOrigin+performance.now();else return 52;a=Math.round(1E6*a);pb=[a>>>0,(N=a,1<=+Math.abs(N)?0<N?+Math.floor(N/4294967296)>>>0:~~+Math.ceil((N-+(~~N>>>0))/4294967296)>>>0:0)];q()[d>>2]=pb[0];q()[d+4>>2]=pb[1];return 0}
var eb=()=>{},fb=()=>{R+=1;throw"unwind";},hb=a=>{var b=p().length;a>>>=0;if(a<=b||2147483648<a)return!1;for(var c=1;4>=c;c*=2){var d=b*(1+.2/c);d=Math.min(d,a+100663296);a:{d=(Math.min(2147483648,65536*Math.ceil(Math.max(a,d)/65536))-f.buffer.byteLength+65535)/65536|0;try{f.grow(d);m();var g=1;break a}catch(e){}g=void 0}if(g)return!0}return!1},Ob={},Qb=()=>{if(!Pb){var a={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&
navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:B||"./this.program"},b;for(b in Ob)void 0===Ob[b]?delete a[b]:a[b]=Ob[b];var c=[];for(b in a)c.push(`${b}=${a[b]}`);Pb=c}return Pb},Pb;function ib(a,b){if(z)return U(7,1,a,b);var c=0;Qb().forEach((d,g)=>{var e=b+c;g=r()[a+4*g>>2]=e;for(e=0;e<d.length;++e)aa()[g++]=d.charCodeAt(e);aa()[g]=0;c+=d.length+1});return 0}function jb(a,b){if(z)return U(8,1,a,b);var c=Qb();r()[a>>2]=c.length;var d=0;c.forEach(g=>d+=g.length+1);r()[b>>2]=d;return 0}
function kb(a){return z?U(9,1,a):52}function lb(a,b,c,d){return z?U(10,1,a,b,c,d):52}function mb(a,b,c,d,g){return z?U(11,1,a,b,c,d,g):70}var Rb=[null,[],[]];function nb(a,b,c,d){if(z)return U(12,1,a,b,c,d);for(var g=0,e=0;e<c;e++){var h=r()[b>>2],l=r()[b+4>>2];b+=8;for(var v=0;v<l;v++){var n=p()[h+v],y=Rb[a];0===n||10===n?((1===a?sa:E)(Hb(y)),y.length=0):y.push(n)}g+=l}r()[d>>2]=g;return 0}
var Sb=a=>{for(var b=0,c=0;c<a.length;++c){var d=a.charCodeAt(c);127>=d?b++:2047>=d?b+=2:55296<=d&&57343>=d?(b+=4,++c):b+=3}b+=1;c=S(b);Y(a,c,b);return c};z||Da.unshift(()=>{Ha();Ia()});var Lb=[ob,xb,Fb,Sa,Ta,Ua,bb,ib,jb,kb,lb,mb,nb],Qa,Z;
(async function(){function a(d,g){Z=d.exports;yb.push(Z.F);Db=Z.M;Ea.unshift(Z.C);ta=g;Ia();return Z}Ha();var b=Pa();if(t.instantiateWasm)try{return t.instantiateWasm(b,a)}catch(d){E(`Module.instantiateWasm callback failed with error: ${d}`),u(d)}if(z)return new Promise(d=>{ua=g=>{var e=new WebAssembly.Instance(g,Pa());a(e,g);d()}});La??=Ka("stockfish.wasm")?"stockfish.wasm":t.locateFile?t.locateFile("stockfish.wasm",C):C+"stockfish.wasm";try{var c=await Oa(b);a(c.instance,c.module);return c}catch(d){u(d)}})();
var Tb=t._main=(a,b)=>(Tb=t._main=Z.D)(a,b);t._uci_command=a=>(t._uci_command=Z.E)(a);var I=()=>(I=Z.G)(),ya=(a,b,c,d,g,e)=>(ya=Z.H)(a,b,c,d,g,e),Ca=()=>(Ca=Z.I)(),vb=(a,b,c,d,g)=>(vb=Z.J)(a,b,c,d,g),zb=a=>(zb=Z.K)(a),Eb=a=>(Eb=Z.L)(a),Mb=(a,b)=>(Mb=Z.N)(a,b),Jb=()=>(Jb=Z.O)(),Bb=(a,b)=>(Bb=Z.P)(a,b),T=a=>(T=Z.Q)(a),S=a=>(S=Z.R)(a),ub=()=>(ub=Z.S)();
t.ccall=(a,b,c,d)=>{var g={string:n=>{var y=0;null!==n&&void 0!==n&&0!==n&&(y=Sb(n));return y},array:n=>{var y=S(n.length);aa().set(n,y);return y}};a=t["_"+a];var e=[],h=0;if(d)for(var l=0;l<d.length;l++){var v=g[c[l]];v?(0===h&&(h=ub()),e[l]=v(d[l])):e[l]=d[l]}c=a(...e);return c=function(n){0!==h&&T(h);return"string"===b?n?Hb(p(),n):"":"boolean"===b?!!n:n}(c)};var Ub;L=function Vb(){Ub||Wb();Ub||(L=Vb)};
function Xb(a=[]){var b=Tb;a.unshift(B);var c=a.length,d=S(4*(c+1)),g=d;a.forEach(h=>{r()[g>>2]=Sb(h);g+=4});r()[g>>2]=0;try{var e=b(c,d);M(e,!0)}catch(h){wb(h)}}
function Wb(){var a=ma;function b(){if(!Ub&&(Ub=!0,t.calledRun=!0,!G&&(z?startWorker(t):W(Ea),z||W(Fa),ha(t),t.onRuntimeInitialized?.(),Yb&&Xb(a),!z))){if(t.postRun)for("function"==typeof t.postRun&&(t.postRun=[t.postRun]);t.postRun.length;){var c=t.postRun.shift();Ga.unshift(c)}W(Ga)}}if(!(0<K))if(z)ha(t),z?startWorker(t):W(Ea);else{if(t.preRun)for("function"==typeof t.preRun&&(t.preRun=[t.preRun]);t.preRun.length;)Da.unshift(t.preRun.shift());W(Da);0<K||(t.setStatus?(t.setStatus("Running..."),setTimeout(()=>
{setTimeout(()=>t.setStatus(""),1);b()},1)):b())}}if(t.preInit)for("function"==typeof t.preInit&&(t.preInit=[t.preInit]);0<t.preInit.length;)t.preInit.pop()();var Yb=!0;t.noInitialRun&&(Yb=!1);Wb();moduleRtn=ia;


  return moduleRtn;
}
);
})();
if (typeof exports === 'object' && typeof module === 'object') {
  module.exports = Stockfish;
  // This default export looks redundant, but it allows TS to import this
  // commonjs style module.
  module.exports.default = Stockfish;
} else if (typeof define === 'function' && define['amd'])
  define([], () => Stockfish);
var isPthread = globalThis.self?.name?.startsWith('em-pthread');
var isNode = typeof globalThis.process?.versions?.node == 'string';
if (isNode) isPthread = require('worker_threads').workerData === 'em-pthread'

// When running as a pthread, construct a new instance on startup
isPthread && Stockfish();
